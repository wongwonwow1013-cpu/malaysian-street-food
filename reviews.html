<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Malaysian Street Food — Reviews</title>

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

  <!-- External Site-Wide Style -->
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <!-- Navbar -->
  <!-- Navbar -->
<nav>
  <ul>
    <li><a href="index.html">Home</a></li>
    <li><a href="dishes.html">Dishes</a></li>
    <li><a href="featured.html">Featured</a></li>
    <li><a href="gallery.html">Gallery</a></li>
    <li><a href="location.html">Locations</a></li>
    <li><a href="reviews.html">Reviews</a></li>
    <li><a href="contact.html">Contact</a></li>
    <li><a href="about.html">About Us</a></li>
    <li><a class="active" href="faq.html">FAQ</a></li>
    <li><a href="events.html">Events</a></li>
  </ul>
</nav>


  <!-- Reviews Section -->
  <main>
    <h2>User Reviews</h2>
    <div id="reviewsList" class="mt-3"></div>

    <h3 class="mt-5">Add Your Review</h3>
    <form id="reviewForm">
      <div class="mb-3">
        <label class="form-label">Name:</label>
        <input type="text" id="name" class="form-control" required>
      </div>
      <div class="mb-3">
        <label class="form-label">Rating (1-5):</label>
        <input type="number" id="rating" class="form-control" min="1" max="5" required>
      </div>
      <div class="mb-3">
        <label class="form-label">Comment:</label>
        <textarea id="comment" class="form-control" required></textarea>
      </div>
      <button type="submit" class="btn btn-primary">Submit Review</button>
    </form>
  </main>

  <!-- Footer -->
  <footer>
    <p>© <span id="year"></span> MSFood. All Rights Reserved.</p>
  </footer>

  <!-- Scripts -->
  <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    document.getElementById("year").textContent = new Date().getFullYear();

    const REVIEWS_KEY = "msfood_reviews";

    function loadReviews(){
      return JSON.parse(localStorage.getItem(REVIEWS_KEY)) || [];
    }

    function saveReviews(reviews){
      localStorage.setItem(REVIEWS_KEY, JSON.stringify(reviews));
    }

    function deleteReview(index) {
      let reviews = loadReviews();
      reviews.splice(index, 1); // remove the selected review
      saveReviews(reviews);
      renderReviews();
    }

    function renderReviews(){
      let reviews = loadReviews();
      let html = "";
      if(reviews.length === 0){
        html = "<p class='text-muted'>No reviews yet. Be the first to add one!</p>";
      } else {
        reviews.forEach((r, index) => {
          html += `<div class="card mb-2"><div class="card-body">
                    <strong>${r.name}</strong> <span class="text-warning">${"★".repeat(r.rating)}</span>
                    <p>${r.comment}</p>
                    <button class="btn btn-danger btn-sm" onclick="deleteReview(${index})">Delete</button>
                   </div></div>`;
        });
      }
      $("#reviewsList").html(html);
    }

    $("#reviewForm").on("submit", function(e){
      e.preventDefault();
      let name = $("#name").val();
      let rating = $("#rating").val();
      let comment = $("#comment").val();
      let reviews = loadReviews();
      reviews.push({name, rating, comment});
      saveReviews(reviews);
      renderReviews();
      this.reset();
    });

    renderReviews();
  </script>
</body>
</html>
