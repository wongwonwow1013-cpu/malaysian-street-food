<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Contact - Malaysian Street Food</title>
  <link rel="stylesheet" href="style.css">
  <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
</head>
<body class="contact-page">

  <!-- ===================== NAVBAR ===================== -->
  <nav>
    <ul>
      <li><a href="index.html">Home</a></li>
      <li><a href="dishes.html">Dishes</a></li>
      <li><a href="featured.html">Featured</a></li>
      <li><a href="location.html">Locations</a></li>
      <li><a href="about.html">About Us</a></li>
      <li><a href="faq.html">FAQ</a></li>
      <li><a href="events.html">Events</a></li>
      <li><a href="reviews.html">Reviews</a></li>
      <li><a class="active" href="contact.html">Contact</a></li>
    </ul>
  </nav>

  <!-- ===================== MAIN CONTENT ===================== -->
  <main>
    <div class="contact-card">
      <h2>Contact Us</h2>

      <form id="contactForm">
        <!-- Full Name -->
        <label class="required">Full Name</label>
        <input type="text" id="name" maxlength="60" placeholder="e.g., Nur Aisyah" required>

        <!-- Email -->
        <label class="required">Email</label>
        <input type="email" id="email" placeholder="you@example.com" required>

        <!-- Preferred Contact Method -->
        <label>Preferred Contact</label>
        <select id="channel">
          <option>Email</option>
          <option>WhatsApp</option>
          <option>Telegram</option>
        </select>

        <!-- Message -->
        <label class="required">Message</label>
        <textarea id="message" rows="4" maxlength="500" placeholder="Tell us how we can help…" required></textarea>

        <!-- Buttons -->
        <div class="form-buttons">
          <button type="submit" class="btn-primary">Send</button>
          <button type="button" class="btn-secondary" id="btnClear">Clear</button>
        </div>
      </form>
    </div>
  </main>

  <!-- ===================== FOOTER ===================== -->
  <footer>
    <p>© 2025 Malaysian Street Food. All rights reserved.</p>
  </footer>

  <!-- ===================== TOAST NOTIFICATION ===================== -->
  <div id="toast" class="toast">Message sent!</div>

  <!-- ===================== JAVASCRIPT ===================== -->
  <script>
    $(function(){

      // -------------------- Form Draft Autosave --------------------
      const fields = ['name','email','message'];

      fields.forEach(id => {
        const value = sessionStorage.getItem('contact_' + id);
        if(value) $('#' + id).val(value);

        $('#' + id).on('input', function(){
          sessionStorage.setItem('contact_' + id, this.value);
        });
      });

      // -------------------- Clear Form --------------------
      $('#btnClear').on('click', function(){
        $('#contactForm')[0].reset();
        fields.forEach(id => sessionStorage.removeItem('contact_' + id));
      });

      // -------------------- Submit Form --------------------
      $('#contactForm').on('submit', function(e){
        e.preventDefault();

        const payload = {
          name: $('#name').val().trim(),
          email: $('#email').val().trim(),
          channel: $('#channel').val(),
          message: $('#message').val().trim(),
          time: new Date().toISOString()
        };

        // Validate required fields
        if(!payload.name || !payload.email || !payload.message){
          alert("Please fill all required fields");
          return;
        }

        // Save message in localStorage
        const log = JSON.parse(localStorage.getItem('messages_log') || '[]');
        log.push(payload);
        localStorage.setItem('messages_log', JSON.stringify(log));

        // Clear draft & reset form
        fields.forEach(id => sessionStorage.removeItem('contact_' + id));
        this.reset();

        // Show toast notification
        $('#toast').fadeIn().delay(1500).fadeOut();
      });

    });
  </script>

</body>
</html>
